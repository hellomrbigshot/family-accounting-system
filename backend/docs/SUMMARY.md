# API 接口文档总结

## 文档结构

```
backend/docs/
├── README.md              # 主文档，包含项目概述和基础信息
├── SUMMARY.md             # 本文档，接口概览
└── modules/               # 模块文档目录
    ├── auth.md            # 认证模块
    ├── user.md            # 用户模块
    ├── expense.md         # 支出模块
    ├── category.md        # 分类模块
    ├── tag.md             # 标签模块
    ├── account.md         # 账户模块
    ├── budget.md          # 预算模块
    ├── report.md          # 报表模块
    └── health.md          # 健康检查模块
```

## 接口概览

### 认证模块 (`/api/auth`)
| 接口 | 方法 | 描述 | 认证 |
|------|------|------|------|
| `/login` | POST | 用户登录 | 否 |
| `/register` | POST | 用户注册 | 否 |
| `/user` | GET | 获取用户信息 | 是 |

### 用户模块 (`/api/users`)
| 接口 | 方法 | 描述 | 认证 |
|------|------|------|------|
| `/register` | POST | 用户注册 | 否 |
| `/login` | POST | 用户登录 | 否 |
| `/info` | GET | 获取用户信息 | 是 |

### 支出模块 (`/api/expenses`)
| 接口 | 方法 | 描述 | 认证 |
|------|------|------|------|
| `/` | GET | 获取支出列表 | 是 |
| `/` | POST | 创建支出记录 | 是 |
| `/:id` | PUT | 更新支出记录 | 是 |
| `/:id` | DELETE | 删除支出记录 | 是 |
| `/stats` | GET | 获取支出统计 | 是 |

### 分类模块 (`/api/categories`)
| 接口 | 方法 | 描述 | 认证 |
|------|------|------|------|
| `/` | GET | 获取分类列表 | 是 |
| `/` | POST | 创建分类 | 是 |
| `/:id` | PUT | 更新分类 | 是 |
| `/:id` | DELETE | 删除分类 | 是 |

### 标签模块 (`/api/tags`)
| 接口 | 方法 | 描述 | 认证 |
|------|------|------|------|
| `/` | GET | 获取标签列表 | 是 |
| `/` | POST | 创建标签 | 是 |
| `/:id` | PUT | 更新标签 | 是 |
| `/:id` | DELETE | 删除标签 | 是 |

### 账户模块 (`/api/accounts`)
| 接口 | 方法 | 描述 | 认证 |
|------|------|------|------|
| `/` | GET | 获取账户列表 | 是 |
| `/:id` | GET | 获取指定账户 | 是 |
| `/` | POST | 创建账户 | 是 |
| `/:id` | PUT | 更新账户 | 是 |
| `/:id` | DELETE | 删除账户 | 是 |
| `/transfer` | POST | 账户转账 | 是 |
| `/:id/adjust` | POST | 调整账户余额 | 是 |

### 预算模块 (`/api/budgets`)
| 接口 | 方法 | 描述 | 认证 |
|------|------|------|------|
| `/current` | GET | 获取当前预算 | 是 |
| `/current` | PUT | 更新当前预算 | 是 |

### 报表模块 (`/api/reports`)
| 接口 | 方法 | 描述 | 认证 |
|------|------|------|------|
| `/` | GET | 获取报表数据 | 是 |
| `/export` | GET | 导出报表 | 是 |

### 健康检查模块 (`/api/health`)
| 接口 | 方法 | 描述 | 认证 |
|------|------|------|------|
| `/` | GET | 系统健康检查 | 否 |

## 认证说明

- **JWT Token**: 大部分接口需要 Bearer Token 认证
- **Token 获取**: 通过登录或注册接口获取
- **Token 格式**: `Authorization: Bearer <your_jwt_token>`
- **Token 有效期**: 15 天

## 数据格式

- **请求格式**: JSON
- **响应格式**: JSON
- **字符编码**: UTF-8
- **日期格式**: ISO 8601 (YYYY-MM-DDTHH:mm:ss.sssZ)

## 错误处理

所有接口都遵循统一的错误响应格式：

```json
{
  "message": "错误信息",
  "error": "详细错误信息（可选）"
}
```

## 状态码说明

| 状态码 | 说明 |
|--------|------|
| 200 | 请求成功 |
| 201 | 创建成功 |
| 400 | 请求参数错误 |
| 401 | 未授权 |
| 404 | 资源不存在 |
| 500 | 服务器内部错误 |

## 开发建议

1. **接口测试**: 建议使用 Postman 或类似工具测试接口
2. **错误处理**: 客户端需要妥善处理各种错误状态
3. **Token 管理**: 合理管理 JWT token 的生命周期
4. **数据验证**: 客户端也需要进行数据验证
5. **日志记录**: 记录重要的接口调用日志

## 更新日志

- **v1.0.0** - 初始版本，包含所有基础功能模块的接口文档 